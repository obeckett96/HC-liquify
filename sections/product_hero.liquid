<div class="wrap_product-hero">
          <div class="product-left">
            <div class="wrap_product-img">
              <div class="swiper-container is-product-gallery">
                <div class="swiper is-product-gallery">
                  <div id="my-gallery" li-for:inside="media in product.media" class="swiper-wrapper is-product-gallery">
        {% for media in product.media %}                            
                    
                            {% if media.media_type == 'image' %}    <div li-if="media.media_type == 'image'" class="swiper-slide is-product-gallery">
    
                      <div class="product-header_gallery-lightbox"><img li-object:src="media | image_url: width: 1000" li-object:alt="media.alt" alt="{{ media.alt }}" src="{{ media | image_url: width: 1000 }}" loading="lazy" class="product-header_gallery-image"></div>
                        </div>
{% endif %}
                            
                    
                            {% if media.media_type == 'video' %}    <div li-if="media.media_type == 'video'" class="swiper-slide is-product-gallery">
    
                      <div class="product-header_gallery-lightbox">
                        <div li-object="media | video_tag: controls: true" class="product-header_gallery-image">{{ media | video_tag: controls: true }}</div>
                      </div>
                        </div>
{% endif %}
                            
                  
                    {% endfor %}    </div>
                </div>
                <div class="product-header_slider-wrapper">
                  <div class="swiper_button-wrapper is-product-slider pointer-events-off z-index-1 hide-mobile-landscape">
                    <a aria-label="Previous Slide" href="#" class="swiper_button swiper-prev pointer-events-on w-inline-block">
                      <div class="swiper_button-icon is-reversed w-embed"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewbox="0 0 29.541 22.323">
                          <g id="Group_44" data-name="Group 44" transform="translate(0 1.014)">
                            <path id="Path_1" data-name="Path 1" d="M115.445,20.633l9.311-10.148L115.445.338" transform="translate(-97.25 -0.338)" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="3"></path>
                            <line id="Line_1" data-name="Line 1" x1="27.506" transform="translate(0 10.148)" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="3"></line>
                          </g>
                        </svg></div>
                    </a>
                    <a aria-label="Next Slide" href="#" class="swiper_button swiper-next pointer-events-on w-inline-block">
                      <div class="swiper_button-icon w-embed"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewbox="0 0 29.541 22.323">
                          <g id="Group_44" data-name="Group 44" transform="translate(0 1.014)">
                            <path id="Path_1" data-name="Path 1" d="M115.445,20.633l9.311-10.148L115.445.338" transform="translate(-97.25 -0.338)" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="3"></path>
                            <line id="Line_1" data-name="Line 1" x1="27.506" transform="translate(0 10.148)" fill="none" stroke="currentColor" stroke-miterlimit="10" stroke-width="3"></line>
                          </g>
                        </svg></div>
                    </a>
                  </div>
                  <div class="swiper is-product-thumbnail">
                    <div li-for:inside="media in product.media" class="swiper-wrapper is-product-thumbnail">
        {% for media in product.media %}                            
                      
                            {% if media.media_type == 'image' %}    <div li-if="media.media_type == 'image'" class="swiper-slide is-product-thumbnail">
    <img li-object:src="media | image_url: width: 200" li-object:alt="media.alt" alt="{{ media.alt }}" src="{{ media | image_url: width: 200 }}" loading="lazy" class="product-header_thumbnail-image">    </div>
{% endif %}
                            
                      
                            {% if media.media_type == 'video' %}    <div li-if="media.media_type == 'video'" class="swiper-slide is-product-thumbnail">
    <img li-object:src="media | image_url: width: 200" li-object:alt="media.alt" alt="{{ media.alt }}" src="{{ media | image_url: width: 200 }}" loading="lazy" class="product-header_thumbnail-image">
                        <div aria-hidden="true" class="product-header_play-icon w-embed"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" class="iconify iconify--ic" width="100%" height="100%" preserveaspectratio="xMidYMid meet" viewbox="0 0 24 24">
                            <path fill="currentColor" d="M8 5v14l11-7z"></path>
                          </svg></div>
                          </div>
{% endif %}
                            
                    
                    {% endfor %}    </div>
                  </div>
                </div>
                <div class="swiper-slide is-product-thumbnail is-active hide"></div>
              </div>
              <div class="hide-2 w-embed w-script"><!--  Critical CSS - Add this BEFORE Swiper CSS  -->
                <style>
  /* Override any conflicting styles */
  .swiper-container.is-product-gallery {
    visibility: hidden;
    opacity: 0;
    transition: opacity 0.3s ease;
  }
  .swiper-container.is-product-gallery.swiper-ready {
    visibility: visible !important;
    opacity: 1 !important;
  }
  /* Ensure swiper wrapper doesn't break */
  .swiper-wrapper.is-product-gallery,
  .swiper-wrapper.is-product-thumbnail {
    display: flex !important;
    transition-property: transform !important;
    box-sizing: content-box !important;
  }
  /* Prevent slides from growing too large */
  .swiper-slide.is-product-gallery {
    flex-shrink: 0 !important;
    width: 100% !important;
    height: auto !important;
    position: relative !important;
    transition-property: transform !important;
    display: block !important;
  }
  .swiper-slide.is-product-thumbnail {
    flex-shrink: 0 !important;
    width: auto !important;
    height: auto !important;
    position: relative !important;
    transition-property: transform !important;
    display: block !important;
  }
  /* Ensure images behave properly */
  .product-header_gallery-image,
  .product-header_thumbnail-image {
    max-width: 100% !important;
    height: auto !important;
    display: block !important;
    object-fit: cover !important;
  }
  /* Fix any potential overflow issues */
  .swiper.is-product-gallery,
  .swiper.is-product-thumbnail {
    overflow: hidden !important;
    position: relative !important;
  }
</style>
                <script>
function initializeSwiper() {
  console.log('Starting swiper initialization...');
  // Check if Swiper is loaded
  if (typeof Swiper === 'undefined') {
    console.error('Swiper not loaded yet');
    setTimeout(initializeSwiper, 100);
    return;
  }
  const containers = document.querySelectorAll('.swiper-container.is-product-gallery');
  console.log('Found containers:', containers.length);
  containers.forEach((container, index) => {
    // Skip if already initialized
    if (container.hasAttribute('data-swiper-initialized')) {
      return;
    }
    const thumbsElement = container.querySelector('.swiper.is-product-thumbnail');
    const galleryElement = container.querySelector('.swiper.is-product-gallery');
    const nextButton = container.querySelector('.swiper-next');
    const prevButton = container.querySelector('.swiper-prev');
    console.log('Elements found:', {
      thumbsElement: !!thumbsElement,
      galleryElement: !!galleryElement,
      nextButton: !!nextButton,
      prevButton: !!prevButton
    });
    if (!thumbsElement || !galleryElement) {
      console.error('Required elements not found');
      return;
    }
    // Check slides
    const gallerySlides = galleryElement.querySelectorAll('.swiper-slide.is-product-gallery');
    const thumbSlides = thumbsElement.querySelectorAll('.swiper-slide.is-product-thumbnail');
    console.log('Slides found:', {
      gallery: gallerySlides.length,
      thumbs: thumbSlides.length
    });
    if (gallerySlides.length === 0) {
      console.error('No gallery slides found');
      // Show container anyway
      container.classList.add('swiper-ready');
      return;
    }
    try {
      console.log('Initializing thumbs swiper...');
      // Initialize thumbnail swiper
      const thumbsSwiper = new Swiper(thumbsElement, {
        slidesPerView: "auto",
        slideToClickedSlide: true,
        spaceBetween: 16,
        watchSlidesProgress: true,
        freeMode: true,
        observer: true,
        observeParents: true,
      });
      console.log('Thumbs swiper created:', thumbsSwiper);
      console.log('Initializing gallery swiper...');
      // Initialize main gallery swiper
      const gallerySwiper = new Swiper(galleryElement, {
        slidesPerView: 1,
        spaceBetween: 0,
        observer: true,
        observeParents: true,
        thumbs: {
          swiper: thumbsSwiper,
          slideThumbActiveClass: "is-active",
        },
        navigation: nextButton && prevButton ? {
          nextEl: nextButton,
          prevEl: prevButton,
        } : false,
        keyboard: {
          enabled: true,
          onlyInViewport: true
        },
        mousewheel: {
          forceToAxis: true
        },
        on: {
          init: function() {
            console.log('Gallery swiper initialized');
            container.classList.add('swiper-ready');
            container.setAttribute('data-swiper-initialized', 'true');
          },
          slideChange: function() {
            console.log('Slide changed to:', this.activeIndex);
          }
        }
      });
      console.log('Gallery swiper created:', gallerySwiper);
      // Manual trigger if init event doesn't fire
      setTimeout(() => {
        if (!container.classList.contains('swiper-ready')) {
          console.log('Manually showing container');
          container.classList.add('swiper-ready');
          container.setAttribute('data-swiper-initialized', 'true');
        }
      }, 500);
    } catch (error) {
      console.error('Error initializing swiper:', error);
      // Show container even if swiper fails
      container.classList.add('swiper-ready');
    }
  });
}
// Multiple initialization attempts
document.addEventListener("DOMContentLoaded", () => {
  console.log('DOM Content Loaded');
  setTimeout(initializeSwiper, 500);
});
window.addEventListener("load", () => {
  console.log('Window Load');
  setTimeout(initializeSwiper, 100);
});
// Fallback initialization
setTimeout(() => {
  console.log('Fallback initialization');
  initializeSwiper();
}, 2000);
</script>
              </div>
            </div>
          </div>
          <div class="product-right">
            <div class="product_content">
              <div class="product_top-info">
                <h1 li-object:text="product.title" class="title_product">
{{ product.title }}
</h1>
                <div class="block_star-rating"></div>
              </div>
              <div class="product_main-info">
                <div li-object="product.description" class="product_description w-richtext">{{ product.description }}</div>
                <div class="wrap_payment-options">
                  <div class="product-header_price-wrapper">
                    <div li-js-price="product.selected_or_first_available_variant.selling_plan_allocations.find(allocation => allocation.selling_plan_id == selling_plan)?.price ?? price" class="text-price" x-text="LiquifyHelper.moneyFormat(product.selected_or_first_available_variant.selling_plan_allocations.find(allocation => allocation.selling_plan_id == selling_plan)?.price ?? price, true, '{{ shop.money_with_currency_format }}')">NZD$55</div>
                    <template x-if="selected_or_first_available_variant.compare_at_price > selected_or_first_available_variant.price">
            <div li-js-if="selected_or_first_available_variant.compare_at_price > selected_or_first_available_variant.price">
        
                      <div li-object="product.compare_at_price | money" class="compare-at-price">{{ product.compare_at_price | money }}</div>
                            </div>
    </template>
                    <div class="product-header_tag-list">
                      <template x-if="selected_or_first_available_variant.available != true">
            <div li-js-if="selected_or_first_available_variant.available != true" class="product-item_tag">
        Not in Stock        </div>
    </template>
                      <template x-if="selected_or_first_available_variant.compare_at_price > selected_or_first_available_variant.price">
            <div li-js-if="selected_or_first_available_variant.compare_at_price > selected_or_first_available_variant.price" class="product-item_tag is-red">
        Sale        </div>
    </template>
                    </div>
                  </div>
                  <div class="product-header_form-block w-form">
                    {% form 'product', product, class: 'product-header_default-state' %}
{% if product.selling_plan_groups.size > 0 %}    <div li-if="product.selling_plan_groups.size > 0">
    
                        <div li-for:inside="variant in product.variants">
        {% for variant in product.variants %}                            
                          
                            <template x-if="{{ variant.id }} === product.selected_or_first_available_variant.id">
            <div li-js-if="{{ variant.id }} === product.selected_or_first_available_variant.id" class="product-header_subscription">
        <label class="product-header_subscription_radio-lable w-radio"><input x-on:click="sellingplan_active = false; selling_plan = ''" class="w-form-formradioinput w-radio-input" name="selling_plan_active" data-name="selling_plan_active" type="radio" id="radio-5" checked="" value=""><span class="w-form-label" for="radio-5">
{{ section.settings.text_without_subscription }}
</span></label>
                            <div class="product-header_subscription_radio-lable options"><label class="product-header_subscription_radio-lable is-on w-radio"><input type="radio" name="selling_plan_active" id="radio-4" data-name="selling_plan_active" x-on:click="sellingplan_active = true; selling_plan = '{{ variant.selling_plan_allocations.first.selling_plan.id }}'" class="w-form-formradioinput w-radio-input" value="Radio 4"><span class="w-form-label" for="radio-4">
{{ section.settings.text_with_subscription }}
</span></label>
                              <div x-show="sellingplan_active" class="w-layout-vflex product-header_subscription_radio-lable is-on secondary">{% for plan in variant.selling_plan_allocations %}    <label li-for="plan in variant.selling_plan_allocations" class="product-header_subscription_radio-lable-small w-radio">
                                    <input class="w-form-formradioinput w-radio-input" li-object:value="plan.selling_plan.id" name="selling_plan" data-name="selling_plan" x-model="selling_plan" type="radio" id="radio-4" value="{{ plan.selling_plan.id }}">
                            <span li-object="plan.selling_plan.name" class="w-form-label" for="radio-4">{{ plan.selling_plan.name }}</span>
                        </label>
{% endfor %}</div>
                            </div>
                                  </div>
    </template>
                            <template x-if="sellingplan_active">
            <input name="selling_plan" type="hidden" x-model="selling_plan" li-js-if="sellingplan_active">
    </template>
                            
                        
                    {% endfor %}    </div>
                          </div>
{% endif %}
                      <div class="product-header_add-to-cart-wrapper">
                        <template x-if="selected_or_first_available_variant.available">
            <div li-js-if="selected_or_first_available_variant.available" class="product-header_buy-wrappper">
        <input class="form_input-2 is-quantity w-input" maxlength="256" name="quantity-3" li-element="add-to-cart-quantity" data-name="Quantity 3" placeholder="1" type="number" id="quantity-3" required="" x-model="quantity">
                          <a li-element="add-to-cart" href="#" class="button pink add-to-cart w-button" @click="addToCart($event, true)" :disabled="!addToCartButton">Add to cart</a>
                                </div>
    </template>
                        {% if product.available != true %}    <div li-if="product.available != true" class="product-header_out-of-stock">
    
                          <a href="#" class="button-2 is-secondary max-width-full pointer-events-off w-button">Out of Stock</a>
                            </div>
{% endif %}
                      </div>
                    {% endform %}
                    <div class="hide w-form-done">
                      <div>Thank you! Your submission has been received!</div>
                    </div>
                    <div class="hide w-form-fail">
                      <div>Oops! Something went wrong while submitting the form.</div>
                    </div>
                  </div>
                </div>
                <div class="subscriptions_app_embed_block"></div>
                <div class="accordian_full">
                  {% if product.metafields.details.ingredients %}    <div li-if="product.metafields.details.ingredients" class="accordian_wrap">
    
                    <div class="trigger_product-info">
                      <div>Ingredients</div><img src="{{ 'Vector.svg' | asset_url }}" loading="lazy" width="20" height="20" alt="" class="icon_plus">
                    </div>
                    <div class="accordian_drop">
                      <div li-object="product.metafields.details.ingredients | metafield_tag" class="info_description smaller w-richtext">{{ product.metafields.details.ingredients | metafield_tag }}</div>
                    </div>
                      </div>
{% endif %}
                  {% if product.metafields.details.directions %}    <div li-if="product.metafields.details.directions" class="accordian_wrap">
    
                    <div class="trigger_product-info">
                      <div>Directions for use</div><img src="{{ 'Vector.svg' | asset_url }}" loading="lazy" width="20" height="20" alt="" class="icon_plus">
                    </div>
                    <div class="accordian_drop">
                      <div li-object="product.metafields.details.directions | metafield_tag" class="info_description smaller w-richtext">{{ product.metafields.details.directions | metafield_tag }}</div>
                    </div>
                      </div>
{% endif %}
                </div>
              </div>
            </div>
          </div>
        </div> {% schema %} {
    "tag": "section",
    "name": "Product Hero",
    "class": "section product-hero",
    "settings": [
        {
            "id": "text_without_subscription",
            "type": "text",
            "label": "without Subscription",
            "default": "One-time purchase"
        },
        {
            "id": "text_with_subscription",
            "type": "text",
            "label": "with Subscription",
            "default": "Subscribe &amp; Save 15%"
        }
    ],
    "presets": [
        {
            "name": "Product Hero",
            "category": "Liquify",
            "blocks": []
        }
    ],
    "enabled_on": {
        "templates": [
            "product"
        ]
    }
} {% endschema %}